<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="{% static 'img/tomato.png' %}" type="image/x-icon">
    <title>Tomato Disease Detection</title>
</head>

<body>
    <div class="container">
        <div class="nav-bar">
            <div class="title">
                <h1>Tomato Disease Detection</h1>
                <h1>ระบบจำแนกโรคพืชใบมะเขือเทศโดยใช้การเรียนรู้เชิงลึก</h1>
            </div>
        </div>
        <img src="{% static 'img/tomato_bg.png' %}" alt="" class="bg-img"
            style="position: absolute; top: 0; left: 0; width: 100%; height: auto; object-fit: cover; z-index: -1;">

        <div class="content">
            <div class="link-button">
                <button class="btn" id="predict_page_btn">ทำนายโรคใบมะเขือเทศ</button>
                <button class="btn">โรคใบมะเขือเทศ</button>
            </div>
        </div>

        <div class="full-width-section" data-bg-url="{% static 'img/tomato_bg.png' %}"
            style="width: 100%; display: flex; flex-direction: column; align-items: center; padding: 20px;">
            <div class="disease-info fade-up" id="disease-info">
                <!-- Disease information will be loaded here -->
            </div>

            <div class="general-care-card fade-up" id="general-care">
                <!-- General care information will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background-color: #333;
  color: #fff;
  padding: 20px 0;
  text-align: center;
  position: relative;
  bottom: 0;
  width: 100%;
  height: 150px;
  opacity: 0.8;
  transform: translateY(130%);">
        <div class="footer">
            <div class="footer-text" style="margin-bottom: 10px;">
                <p style="margin: 0;
    font-size: 14px;">&copy; 2024 Tomato Disease Detection. All rights reserved.</p>
            </div>
            <div class="footer-icons" style="display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 10px;">
                <a href="https://github.com/ChidchaiN" target="_blank" style="color: #fff;
        font-size: 20px;
        transition: color 0.3s ease;"><i class="fa-brands fa-github"></i></a>
                <a href="https://twitter.com/abhishekdeshmukh" target="_blank" style="color: #fff;
        font-size: 20px;
        transition: color 0.3s ease;"><i class="fa-brands fa-twitter"></i></a>
                <a href="https://www.facebook.com/abhishekdeshmukh" target="_blank" style="color: #fff;
        font-size: 20px;
        transition: color 0.3s ease;"><i class="fa-brands fa-facebook"></i></a>
                <a href="https://www.instagram.com/abhishekdeshmukh/" target="_blank" style="color: #fff;
        font-size: 20px;
        transition: color 0.3s ease;"><i class="fa-brands fa-instagram"></i></a>
            </div>
            <div class="footer-text">
                <p style="margin: 0;
    font-size: 14px;">Developed by Chidchai Nukhunthod & Paradon Thonthong</p>
            </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry
                        .target); // Stop observing once the element is visible
                    }
                });
            });

            // Target elements for animation
            document.querySelectorAll('.fade-up').forEach(el => {
                observer.observe(el);
            });

            // Existing code
            document.getElementById('predict_page_btn').addEventListener('click', function () {
                window.location.href = '/predict/';
            });

            // Get the background image URL from the data attribute
            const section = document.querySelector('.full-width-section');
            const bgUrl = section.getAttribute('data-bg-url');

            // Apply the background image via JavaScript
            section.style.background = `url('${bgUrl}') repeat`;
            section.style.backgroundSize = 'cover';

            async function loadDiseaseInfo() {
                try {
                    const response = await fetch('{% static "advice/disease_info.json" %}');
                    const data = await response.json();

                    // General Care Information
                    const generalCareDiv = document.getElementById('general-care');
                    generalCareDiv.innerHTML = `
                    <h2>${data.general_care.description}</h2>
                    <ul>
                        ${data.general_care.general_care.map(item => `<li>${item}</li>`).join('')}
                    </ul>
                `;

                    // Disease Information
                    const diseaseInfoDiv = document.getElementById('disease-info');
                    Object.keys(data).forEach(key => {
                        if (key !== 'general_care') {
                            const disease = data[key];
                            diseaseInfoDiv.innerHTML += `
                            <div class="info-card">
                                <h2>${key}</h2>
                                <p>${disease.description}</p>
                                <h3>สาเหตุการเกิดโรค:</h3>
                                <p>${disease.causes}</p>
                                <h3>วิธีการดูแลรักษา:</h3>
                                <ul>
                                    ${disease.treatment.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                                <h3>วิธีการป้องกัน:</h3>
                                <ul>
                                    ${disease.prevention.map(item => `<li>${item}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                        }
                    });
                } catch (error) {
                    console.error('Error loading disease information:', error);
                }
            }

            loadDiseaseInfo();
        });
    </script>

</body>

</html>